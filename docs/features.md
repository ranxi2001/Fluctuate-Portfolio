# 功能详细说明

## 1. 钱包连接与身份识别

### 功能描述
- 支持主流钱包：MetaMask、WalletConnect、Coinbase Wallet
- 连接后自动以用户地址作为唯一标识
- 无需注册账号，钱包即账号

### 技术实现
- 使用 RainbowKit 提供美观的钱包连接 UI
- 使用 wagmi hooks 管理钱包状态
- 自动检测网络并提示切换到 Mantle

---

## 2. 资产手动添加与管理

### 支持的资产类型

#### 加密货币
- BTC、ETH、USDT、USDC
- 其他主流加密货币

#### 真实世界资产（RWA）
- 黄金（XAU/USD）
- 白银（XAG/USD）
- 其他贵金属

#### 法币
- USD、CNY、EUR、GBP、JPY
- 银行存款、现金

#### 自定义资产
- 用户可手动输入资产符号
- 支持自定义价格源

### 操作功能
- ➕ 添加新资产
- ✏️ 编辑持仓数量
- 💵 记录购入成本（可选）
- 🗑️ 删除资产
- 📊 查看单项资产详情

---

## 3. 实时估值引擎（核心亮点）

### Chainlink Price Feeds

使用 Chainlink 在 Mantle 网络上的价格预言机：

| 资产对 | Feed 地址 | 更新频率 |
|--------|-----------|----------|
| BTC/USD | 0x... | 每小时 |
| ETH/USD | 0x... | 每小时 |
| XAU/USD | 0x... | 每小时 |
| EUR/USD | 0x... | 每4小时 |

### 自动计算功能

#### 单项资产价值
```
资产价值 = 持有数量 × 当前价格
```

#### 总资产净值
```
总净值 = Σ(各资产价值)
```

#### 盈亏计算
```
盈亏 = (当前价格 - 购入成本) × 持有数量
盈亏率 = (盈亏 / 总成本) × 100%
```

#### 涨跌幅统计
- 较昨日涨跌
- 较7日前涨跌
- 较30日前涨跌

### 资产分布可视化
- 饼图展示各资产占比
- 颜色区分不同资产类型
- 鼠标悬停显示详细信息

---

## 4. 历史净值曲线

### 数据记录机制
- 每次用户保存资产快照时记录：
  - 时间戳（timestamp）
  - 总净值（USD）
  - 各资产价格（可选）

### 可视化展示
- 折线图展示净值变化趋势
- 时间范围选择：
  - 最近7天
  - 最近30天
  - 最近90天
  - 全部历史

### 交互功能
- 鼠标悬停显示具体数值
- 点击日期查看当日资产快照
- 导出数据为 CSV

---

## 5. 数据持久化

### 方案一：本地存储（LocalStorage）

**优点**：
- ✅ 完全免费，无 gas 费
- ✅ 实现简单快速
- ✅ 数据读写速度快

**缺点**：
- ❌ 仅限本地访问
- ❌ 清除缓存会丢失数据
- ❌ 无法跨设备同步

**适用场景**：
- MVP 快速验证
- 不需要跨设备的用户

### 方案二：链上存储（推荐）

**优点**：
- ✅ 数据永久保存在区块链
- ✅ 任何设备可访问
- ✅ 完全去中心化
- ✅ Mantle 低 gas 费（几乎免费）

**缺点**：
- ❌ 需要支付少量 gas 费
- ❌ 写入速度较慢

**适用场景**：
- 需要跨设备同步
- 追求完全去中心化
- 参加黑客松展示

### 混合方案（最佳实践）
- 本地缓存用于快速读写
- 定期同步到链上（用户手动触发）
- 切换设备时从链上恢复

---

## 6. 额外加分功能

### 导入历史持仓（CSV）
- 支持从其他平台导出的 CSV 文件
- 自动解析并添加资产

### 资产再平衡建议（AI + Oracles）
- 基于资产配置比例
- 给出调整建议
- 考虑风险偏好

### 价格提醒通知
- 设置价格上限/下限
- 使用 Push Protocol 推送通知
- 支持多种通知渠道

### 多语言支持
- 中文 / English
- 自动检测浏览器语言

### 深色模式
- 自适应系统主题
- 手动切换

---

## 功能优先级

### MVP 必须功能（Week 1）
- [x] 钱包连接
- [ ] 资产添加/编辑/删除
- [ ] Chainlink 实时价格
- [ ] 总净值计算
- [ ] 资产分布饼图

### 核心功能（Week 2）
- [ ] 历史净值曲线
- [ ] 链上数据存储
- [ ] UI 优化

### 加分功能（有时间再做）
- [ ] CSV 导入
- [ ] 价格提醒
- [ ] AI 建议
- [ ] 多语言
